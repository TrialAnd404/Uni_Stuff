#VRML V2.0 utf8
EXTERNPROTO foo [exposedField SFColor color] "Eisläufer_draft.wrl#Eislaeufer_Draft1"
EXTERNPROTO foo2 [exposedField SFColor color] "Eisläufer_draft.wrl#Eislaeufer_Draft1"
EXTERNPROTO test_Laterne [exposedField SFBool lightOn] "Laterne_draft.wrl#Laterne_draft"
EXTERNPROTO Typ_Test [] "Typ.wrl#eistyp"

DEF hintergrund Background{
    skyColor [
    0.0 0.1 0.8,
    0.0 0.5 1.0,
    1.0 1.0 1.0
  ]
  skyAngle [0.785, 1.571]

    groundColor [
    0.0 0.0 0.0,
    0.5 0.4 0.2,
    0.6 0.45 0.45
  ]
  groundAngle [0.785, 1.571]
}

DEF TagSchalter Transform{
        translation 20 20 20
        children[
            Shape{
                appearance Appearance{

                }
                geometry Sphere{
                    radius 2
                }
            }
            DEF ToggleTagNacht TouchSensor { }

            DEF dayScript Script {
                eventIn SFBool dayNightToggle
                field SFNode background USE hintergrund
                field SFBool state FALSE
                field MFColor nightSky[
                    0.0 0.1 0.8,
                    0.0 0.05 0.6,
                    0.0 0.02 0.2,
                ]
                field MFColor daySky[
                    0.0 0.1 0.8,
                    0.0 0.5 1.0,
                    1.0 1.0 1.0
                ]
   
                # Only do something in the function
                # if lightIsActive = TRUE (the active param)
                # because as soon as the user releases the mouse
                # button a FALSE is generated again.
                url ["javascript:
                    function dayNightToggle(active) {
                        if (active) {
                            if (state == FALSE) {
                                background.skyColor = nightSky;
                                state = TRUE;
                        }
                        else {
                            background.skyColor = daySky;
                            state = FALSE;
                        }
                    }
                }"
                ]
            }

        ]
}

DEF LichtSchalter Transform{
    translation 20 50 20
        children[
            Shape{
                appearance Appearance{

                }
                geometry Sphere{
                    radius 2
                }
            }
            DEF ToggleLicht TouchSensor { }

            DEF lightScript Script {
                eventIn SFBool lightIsActive
                eventOut SFBool lightState
                field SFBool state FALSE
   
                url ["javascript:
                    function lightIsActive(active) {
                        if (active) {
                            if (state == FALSE) {
                                
                                state = TRUE;
                                lightState = TRUE;
                        }
                        else {
                            
                            state = FALSE;
                            lightState = FALSE;
                        }
                    }
                }"
                ]
            }
        ]
}



DEF foo2Timer TimeSensor{
    cycleInterval 10.0
    loop TRUE
}

Transform {
    children [
        #Eisbahn
        Shape{
            geometry Cylinder {
                radius 50
                height 0
                bottom FALSE
                top TRUE
                side TRUE
            }
            appearance Appearance{
                material Material{
                }
            }
        }

        Transform{
            translation 0 0.5 0
            children[
                DEF Laterne test_Laterne{
                    
                }
            ]
        }
        
        Transform {
            translation 55 10 55
            children [
                #Haus1
                Shape{
                    geometry Box {
                        size 20 20 20
                    }
                    appearance Appearance{
                        material Material{
                        }
                    }
                }
            ]
        }

        DEF fooTest Transform {
            translation 10 0 30
            children[
                DEF fooTimer TimeSensor{
                    cycleInterval 1.0
                    loop TRUE
                }

                DEF BewegungTest PositionInterpolator{
                    key [0 0.5 1]
                    keyValue[
                        10 0 0
                        0 10 0
                        10 0 0
                    ]
                }

                #foo {}

                Typ_Test{}
               
            ]
            
        }

        DEF foo2 Transform {
            children[
                DEF Animation2 PositionInterpolator{
                   # key [0 .0308406 .061681201 .242311573 .365673975 .385307711 .508670113 .567571321 .690933723 .769468667 .831149868 .921465054 .983146256 1]
                    key[
                        0.0 0.06238149590637184 0.0689073569183241 0.07543321793027637 0.08195907894222862 0.08848493995418089 0.09501080096613314 0.1015366619780854 0.10806252299003767 0.11458838400198994 0.12111424501394219 
0.12764010602589446 0.13090303653187058 0.1341659670378467 0.13742889754382284 0.14069182804979896 0.14395475855577508 0.14721768906175123 0.15048061956772735 0.15374355007370347 0.15700648057967959 
0.16026941108565573 0.16353234159163185 0.166795272097608 0.17005820260358412 0.17332113310956027 0.17658406361553639 0.1798469941215125 0.18310992462748865 0.18637285513346477 0.1896357856394409 
0.19289871614541704 0.19616164665139318 0.1994245771573693 0.20268750766334542 0.20595043816932157 0.20921336867529772 0.21247629918127384 0.21573922968724998 0.2190021601932261 0.22226509069920222 
0.22552802120517837 0.22879095171115452 0.23205388221713064 0.23531681272310676 0.2385797432290829 0.24184267373505902 0.24510560424103514 0.2483685347470113 0.2516314652529874 0.25489439575896355 
0.2581573262649397 0.29974499020252093 0.3030079207084971 0.30627085121447317 0.3095337817204493 0.31279671222642547 0.3160596427324016 0.3193225732383777 0.32258550374435385 0.32584843425033 
0.32911136475630615 0.3323742952622823 0.33890015627423453 0.34542601728618677 0.351951878298139 0.3584777393100913 0.36500360032204354 0.37152946133399584 0.37805532234594813 0.38458118335790037 
0.3911070443698526 0.3976329053818049 0.4600144012881767 0.466540262300129 0.47306612331208125 0.4795919843240335 0.4861178453359858 0.492643706347938 0.49916956735989026 0.5056954283718426 
0.5122212893837949 0.5187471503957471 0.5252730114076994 0.5317988724196517 0.538324733431604 0.5448505944435563 0.5513764554555086 0.5579023164674609 0.5644281774794132 0.5709540384913655 
0.5774798995033178 0.5840057605152701 0.5905316215272224 0.6737069494023848 0.6802328104143371 0.6867586714262894 0.6932845324382417 0.699810393450194 0.7063362544621463 0.7128621154740986 
0.7193879764860509 0.7259138374980032 0.7324396985099555 0.7389655595219078 0.7454914205338601 0.7520172815458124 0.7585431425577647 0.765069003569717 0.7715948645816693 0.7781207255936216 
0.7846465866055738 0.7911724476175261 0.7976983086294784 0.8042241696414307 0.810750030653383 0.8172758916653353 0.8238017526772876 0.8303276136892399 0.8368534747011922 0.8433793357131445 
0.8499051967250968 0.8564310577370491 0.8629569187490014 0.8694827797609537 0.876008640772906 0.8825345017848583 0.8890603627968106 0.8955862238087628 0.9021120848207151 0.9086379458326674 
0.9151638068446197 0.921689667856572 0.9282155288685243 0.9347413898804766 0.9412672508924289 0.9477931119043812 0.9543189729163335 0.9608448339282858 0.9673706949402381 0.9738965559521904 
0.9804224169641427 0.986948277976095 0.9934741389880473 0.9999999999999996 0.9999999999999996 
]
                    keyValue[
                        0.0 0 0.0,
0.0 0 6.0,
0.04924663761944892 0 6.625737860160924,
0.19577393481938588 0 7.23606797749979,
0.4359739032465284 0 7.815961998958187,
0.7639320225002102 0 8.351141009169893,
1.1715728752538097 0 8.82842712474619,
1.6488589908301075 0 9.23606797749979,
2.184038001041813 0 9.564026096753471,
2.76393202250021 0 9.804226065180615,
3.374262139839076 0 9.950753362380551,
3.9999999999999996 0 10.0,
4.3128689300804615 0 9.975376681190276,
4.618033988749894 0 9.902113032590307,
4.9079809994790935 0 9.782013048376736,
5.175570504584946 0 9.618033988749895,
5.414213562373094 0 9.414213562373096,
5.618033988749895 0 9.175570504584947,
5.782013048376735 0 8.907980999479093,
5.902113032590306 0 8.618033988749895,
5.975376681190275 0 8.312868930080462,
6.0 0 8.0,
6.0246233188097245 0 7.6871310699195385,
6.097886967409693 0 7.381966011250105,
6.217986951623264 0 7.0920190005209065,
6.381966011250105 0 6.824429495415053,
6.585786437626905 0 6.585786437626905,
6.824429495415053 0 6.381966011250105,
7.0920190005209065 0 6.217986951623264,
7.381966011250105 0 6.097886967409693,
7.687131069919538 0 6.0246233188097245,
8.0 0 6.0,
8.312868930080462 0 6.0246233188097245,
8.618033988749895 0 6.097886967409693,
8.907980999479093 0 6.217986951623264,
9.175570504584947 0 6.381966011250105,
9.414213562373096 0 6.585786437626905,
9.618033988749895 0 6.824429495415053,
9.782013048376736 0 7.0920190005209065,
9.902113032590307 0 7.381966011250105,
9.975376681190276 0 7.687131069919538,
10.0 0 8.0,
10.024623318809724 0 8.312868930080462,
10.097886967409693 0 8.618033988749895,
10.217986951623264 0 8.907980999479093,
10.381966011250105 0 9.175570504584947,
10.585786437626904 0 9.414213562373096,
10.824429495415053 0 9.618033988749895,
11.092019000520907 0 9.782013048376736,
11.381966011250105 0 9.902113032590307,
11.687131069919538 0 9.975376681190276,
12.0 0 10.0,
16.0 0 10.0,
16.312868930080462 0 9.975376681190276,
16.618033988749893 0 9.902113032590307,
16.907980999479093 0 9.782013048376736,
17.175570504584947 0 9.618033988749895,
17.414213562373096 0 9.414213562373096,
17.618033988749893 0 9.175570504584947,
17.782013048376736 0 8.907980999479093,
17.902113032590307 0 8.618033988749895,
17.975376681190276 0 8.312868930080462,
18.0 0 8.0,
18.049246637619447 0 7.374262139839076,
18.195773934819385 0 6.76393202250021,
18.435973903246527 0 6.184038001041813,
18.76393202250021 0 5.6488589908301075,
19.17157287525381 0 5.17157287525381,
19.648858990830107 0 4.76393202250021,
20.184038001041813 0 4.435973903246529,
20.76393202250021 0 4.195773934819385,
21.374262139839075 0 4.049246637619449,
22.0 0 4.0,
28.0 0 4.0,
28.625737860160925 0 3.950753362380551,
29.23606797749979 0 3.804226065180614,
29.815961998958187 0 3.5640260967534716,
30.351141009169893 0 3.23606797749979,
30.82842712474619 0 2.8284271247461903,
31.23606797749979 0 2.3511410091698925,
31.564026096753473 0 1.815961998958187,
31.804226065180615 0 1.2360679774997898,
31.950753362380553 0 0.6257378601609238,
32.0 0 0,
31.950753362380553 0 -0.625737860160923,
31.804226065180615 0 -1.2360679774997891,
31.564026096753473 0 -1.8159619989581866,
31.23606797749979 0 -2.351141009169892,
30.82842712474619 0 -2.8284271247461894,
30.351141009169893 0 -3.2360679774997894,
29.815961998958187 0 -3.5640260967534707,
29.23606797749979 0 -3.8042260651806137,
28.625737860160925 0 -3.9507533623805506,
28.0 0 -3.9999999999999996,
20.0 0 -3.9999999999999996,
19.374262139839075 0 -3.9507533623805506,
18.76393202250021 0 -3.8042260651806137,
18.184038001041813 0 -3.564026096753471,
17.648858990830107 0 -3.2360679774997894,
17.17157287525381 0 -2.82842712474619,
16.76393202250021 0 -2.351141009169892,
16.435973903246527 0 -1.8159619989581866,
16.195773934819385 0 -1.2360679774997894,
16.049246637619447 0 -0.6257378601609234,
16.0 0 0.0,
15.950753362380551 0 0.6257378601609235,
15.804226065180615 0 1.2360679774997896,
15.564026096753471 0 1.815961998958187,
15.23606797749979 0 2.3511410091698925,
14.82842712474619 0 2.82842712474619,
14.351141009169893 0 3.23606797749979,
13.815961998958187 0 3.564026096753471,
13.23606797749979 0 3.804226065180614,
12.625737860160925 0 3.950753362380551,
12.0 0 4.0,
11.374262139839077 0 3.950753362380551,
10.76393202250021 0 3.804226065180614,
10.184038001041813 0 3.5640260967534716,
9.648858990830107 0 3.23606797749979,
9.17157287525381 0 2.8284271247461903,
8.76393202250021 0 2.3511410091698925,
8.435973903246529 0 1.815961998958187,
8.195773934819385 0 1.2360679774997898,
8.049246637619449 0 0.6257378601609238,
8.0 0 0,
7.950753362380551 0 -0.625737860160923,
7.804226065180615 0 -1.2360679774997891,
7.564026096753471 0 -1.8159619989581866,
7.23606797749979 0 -2.351141009169892,
6.82842712474619 0 -2.8284271247461894,
6.3511410091698925 0 -3.2360679774997894,
5.815961998958187 0 -3.5640260967534707,
5.23606797749979 0 -3.8042260651806137,
4.625737860160924 0 -3.9507533623805506,
4.0 0 -3.9999999999999996,
3.3742621398390766 0 -3.9507533623805506,
2.76393202250021 0 -3.8042260651806137,
2.184038001041813 0 -3.564026096753471,
1.6488589908301075 0 -3.2360679774997894,
1.1715728752538102 0 -2.82842712474619,
0.7639320225002102 0 -2.351141009169892,
0.43597390324652885 0 -1.8159619989581866,
0.19577393481938588 0 -1.2360679774997894,
0.04924663761944892 0 -0.6257378601609234,
0.0 0 0.0,
>>>>>>> ee18056ba4730292b3f78a2eda11035688bb5f42
                    ]
                }

                DEF Animation3 OrientationInterpolator{
                    key [
                        0 0.06238149590637184 0.13090303653187058 0.16353234159163185 0.19616164665139318 0.22879095171115452 0.29974499020252093 0.29974499020252093 0.33890015627423453 0.4600144012881767 0.4600144012881767 0.5317988724196517 
0.6737069494023848 0.6737069494023848 0.7454914205338601 0.810750030653383 0.876008640772906 0.9412672508924289 0.9999999999999996
                    ]
                    keyValue[
                        0 1 0 0,
                        0 1 0 1.5707963267948966,
0 1 0 1.5707963267948966,
0 1 0 3.141592653589793,
0 1 0 -1.5707963267948966,
0 1 0 0.0,
0 1 0 1.5707963267948966,
0 1 0 0.0,
0 1 0 3.141592653589793,
0 1 0 1.5707963267948966,
0 1 0 0.0,
0 1 0 3.141592653589793,
0 1 0 4.71238898038469,
0 1 0 0.0,
0 1 0 6.283185307179586,
0 1 0 4.71238898038469,
0 1 0 3.141592653589793,
0 1 0 4.71238898038469,
0 1 0 6.283185307179586,

                    ]
                }

                DEF DrehungTest OrientationInterpolator{
                    key [
                        0 .6 1
                    ]
                    keyValue[
                        0 1 0 1.57,
                        0 1 0 0,
                        0 1 0 1.57,

                    ]
                }

                Transform{
                    translation 0 20 0
                    rotation 0 1 0 1.57
                    children[
                        foo2 {
                            color 0 1 0
                        }
                    ]
                    }
                
            ]  

        }    
    ]
}

Viewpoint {
	description "bar2"
	position 0 100 0
	orientation -1 0 0 1.5707963267948966
}

Viewpoint {
	description "foo"
	position 2 0 2
}


Viewpoint {
	description "bar"
	position 0 5 0
}

#ROUTE fooTimer.fraction_changed TO Animation1.set_fraction
#ROUTE Animation1.value_changed TO fooTest.set_translation

ROUTE foo2Timer.fraction_changed TO BewegungTest.set_fraction
ROUTE BewegungTest.value_changed TO foo2.set_translation
ROUTE foo2Timer.fraction_changed TO DrehungTest.set_fraction
ROUTE DrehungTest.value_changed TO foo2.set_rotation

ROUTE ToggleTagNacht.isActive TO dayScript.dayNightToggle

ROUTE ToggleLicht.isActive TO lightScript.lightIsActive
ROUTE lightScript.lightState TO Laterne.lightOn
